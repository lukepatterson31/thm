# Lateral Movement and Pivoting

### Moving Through the Network

**What is Lateral Movement?**

Lateral movement is a group of techniques used by attackers to move around a network.
Moving is essential for many reasons, including:

- Reaching our goals as attackers

- Bypassing network restrictions in place

- Establishing additional points of entry to the network

- Creating confusion and avoid detection.

![kill chain](../pictures/kill-chain.png)

Usually, we will repeat this cycle several times before reaching our final goal on the network. If our 
first foothold is a machine with very little access to other network resources, we might need to move 
laterally to other hosts that have more privileges on the network.

**The Attacker's Perspective**

The simplest way to move laterally is to use standard administrative protocols like WinRM, RDP, VNC or 
SSH to connect to other machines around the network. This approach can be used to emulate regular 
user behavour. Make sure the connections don't appear suspicious (e.g.why is a local admin on a 
Marketing machine connecting to a Dev machine?)

**Administrators and UAC**

Two types of administrator:

- Local accounts part of the local Administrators group

- Domain accounts part of the local Administrators group

There are restrictions imposed by User Account Control (UAC) over local administrators (except for the 
default Administrator account). By default, local administrators won't be able to remotely connect to a 
machine and perform administrative tasks unless using an interactive session through RDP. 

Windows will deny any administrative task requested via RPC, SMB or WinRM since such administrators 
will be logged in with a filtered medium integrity token, preventing the account from doing privileged 
actions.

The only local account that will get full privileges is the default Administrator account.

Domain accounts with local administration privileges won't be subject to the same treatment and will be 
logged in with full administrative privileges.

This security feature can be disabled if desired, and sometimes you will find no difference between 
local and domain accounts in the administrator's group.

It's essential to keep in mind that should some of the lateral movement techniques fail, it might be 
due to using a non-default local administrator where UAC is enforced. Info [here](https://docs.microsoft.com/en-us/troubleshoot/windows-server/windows-security/user-account-control-and-remote-restriction)

### Spawning Processes Remotely

**Psexec**


