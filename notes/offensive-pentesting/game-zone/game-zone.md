# Game Zone

### Deploy the vulnerable machine

**What is the name of the large cartoon avatar holding a sniper on the forum?**

Reverse image search to find the name.

### Obtain access via SQLi

Log in using SQL injection. Use `' or 1=1 -- -` as the username to close the original query, 
generate a true value (1=1) and then comment out the rest of the query (-- -).

**When you've logged in, what page do you get redirected to?**

Look at the page in the url.

### Using SQLMap

Using burp suite capture a search request and save it to a txt file (request is in xml),
then use SQLMap to dump the entire database for GameZone

`sqlmap -r request.txt --dbms=mysql --dump`

### Cracking a password with JohnTheRipper

Echo the hash into a file and use john to crack it. Find the format with a hash identifier.

`john --wordlist=rockyou.txt --format=<FORMAT> hash.txt`

**What is the de-hashed password?**

Read the result from john

SSH into the machine using the username you found in the SQL db and the password from john

**What is the user flag?**

Use cat to display the contents of the user flag

### Exposing services with reverse SSH tunnels

![Reverse SSH tunneling](./pictures/rev-ssh-tunnel.png)

Reverse SSH port forwarding specifies that the given port on the remote server host is to be 
forwarded to the given host and port on the local side.

`-L` is a local tunnel (YOU <-- CLIENT). If a site was blocked, you can forward the 
traffic to a server you own and view it. For example, if imgur was blocked at work, you can 
do `ssh -L 9000:imgur.com:80 user@example.com`. Going to localhost:9000 on your machine, 
will load imgur traffic using your other server.

`-R` is a remote tunnel (YOU --> CLIENT). You forward your traffic to the other server for 
others to view. Similar to the example above, but in reverse.

Use `ss` to investigate sockets running on the host

| Argument | Description |
|----------|-------------|
| -t | Display TCP sockets |
| -u | Display UDP sockets |
| -l | Display only listening sockets |
| -p | Shows the process using the socket |
| -n | Doesn't resolve serivce names |

**How many TCP sockets are running?**

Run `ss -tlpn` to show TCP sockets on the host

We can see that a service running on port 10000 is blocked via a firewall rule from the 
outside (we can see this from the IPtable list). However, Using an SSH Tunnel we can expose 
the port to us (locally)!

From our local machine, run `ssh -L 10000:localhost:10000 <USERNAME>@<TARGET-IP>` 

**What's the name of the exposed CMS?**

Find the name by navigating to `localhost:10000`

**What's the CMS browser?**

Log in to the CMS with the user account you cracked the password to.

### Privilege Escalation with Metasploit

Use metasploit to find a payload to execute against the machine.

**What is the root flag?**

Gain root access with the metasploit exploit for the CMS version and cat /root/root.txt
