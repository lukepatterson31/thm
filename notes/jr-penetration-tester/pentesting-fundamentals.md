# Pentesting Fundamentals

### Penteration Testing Ethics

Companies that perform pentests are held to against legal frameworks and industry 
accreditation like the National Cyber Security Centre's (NCSC) CHECK scheme in the UK.

White hat = good

Grey hat = mainly good, don't alawys follow ethics or the law

Black hat = bad

Rules of Engagement (ROE)

The ROE is a document created during the initail stages of a pentesting engagement.
It consists of three main sections: 

- Permission:

Gives explicit permission for the engagement to be carried out. Permission is essential to 
legally protect individuals and organisations for the activities they carry out.

- Test Scope:

Annotates specific targets to which the engagement should apply.

- Rules:

Defines the techniques permitted during the engagement.

### Penetration Testing Methodologies

#### General methodology

##### Stage 1. Information Gathering

Collect as much information about the target/organisation as possible (OSINT, research 
etc.). Does not involve scanning any systems!

##### Stage 2. Enumeration/Scanning

Discover applications and services running on the systems, find vulnerabilities.

##### Stage 3. Exploitation

Leverage vulnerabilities discovered on a system or application using public exploits or 
exploiting application logic.

##### Stage 4. Privilege Escalation

After successfully exploiting a system or application (AKA a foothold), this stage is the 
attempt to expand your access to a system. Escalation can be horizontal (same privilege leve)
or vertical (higher privilege level).

##### Stage 5. Post-exploitation

1. What other hosts can be targeted (pivoting)
2. What additional information can we gather as a privileged user
3. Cover your tracks
4. Reporting

#### OSSTMM

Open Source Security Testing Methodology focuses primarily on:

1. Telecommunications (phones, VoIP, etc.)
2. Wired Networks
3. Wireless communications

Pros:

- Covers various testing strategies in-depth.

- Includes testing strategies for specific targets (I.e. telecommunications and networking) 

- The framework is flexible depending upon the organisation's needs.

- The framework is meant to set a standard for systems and applications, meaning that a 

- universal methodology can be used in a penetration testing scenario.

Cons:

- The framework is difficult to understand, very detailed, and tends to use unique 
definitions.

#### OWASP

[Open Web Application Security Project](https://owasp.org/) is used solely for testing web applications and services.

Pros:

- Easy to pick up and understand.

- Actively maintained and is frequently updated.

- It covers all stages of an engagement: from testing to reporting and remediation.

- Specialises in web applications and services.

Cons: 

- It may not be clear what type of vulnerability a web application has (they can often 
overlap).

- OWASP does not make suggestions to any specific software development life cycles.

- The framework doesn't hold any accreditation such as CHECK.

#### NIST Cybersecurity Framework 1.1

National Institute of Standards and Technology [Cybersecurity Framework](https://www.nist.gov/cyberframework) is used to improve an organisations cybersecurity standards 
and manage the risk of cyber threats.

It provides guidelines on security controls and benchmarks for success for organisations 
from critical infrastructure (power plants, etc.) to commercial. There is a limited section
on a standard guideline for the methodology a penetration tester should take.

Pros:

- The NIST Framework is estimated to be used by 50% of American organisations by 2020.

- The framework is extremely detailed in setting standards to help organisations mitigate 
the threat posed by cyber threats.

- The framework is very frequently updated.	
	
- NIST provides accreditation for organisations that use this framework.	

- The NIST framework is designed to be implemented alongside other frameworks.
	

Cons:

- NIST has many iterations of frameworks, so it may be difficult to decide which one 
applies to your organisation.

- The NIST framework has weak auditing policies, making it difficult to determine how a 
breach occurred.

- The framework does not consider cloud computing, which is quickly becoming increasingly 
popular for organisations.

#### NCSC CAF

National Cyber Security Centre [Cyber Assessment Framework](https://www.ncsc.gov.uk/collection/caf/caf-principles-and-guidance) is an extensive framework of 14 
principles used to assess the risk of various cyber threats and an organisation's defences 
against these.

Pros:

- This framework is backed by a government cybersecurity agency.

- This framework provides accreditation.

- This framework covers fourteen principles which range from security to response.

Cons:

- The framework is still new in the industry, meaning that organisations haven't had much
time to make the necessary changes to be suitable for it.

- The framework is based on principles and ideas and isn't as direct as having rules like 
some other frameworks.

### Black box, White box, Grey box Penetration Testing

Black-box: No knowledge of inner workings of application or service. More time spent on 
information gathering and enumeration steps.

White-box: Full knowledge of the application and its expected behaviour, more time 
consuming than black-box testing. The full knowledge in a White-Box testing scenario 
provides a testing approach that guarantees the entire attack surface can be validated

Grey-box: Limited knowledge of the internal components of the application or piece of 
software. Usually for extremeley well-hardened attack surfaces. 


